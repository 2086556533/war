<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7.14作业</title>
    <link rel="stylesheet" href="./reset200802.css">
    <link href="https://img.alicdn.com/tfs/TB1XlF3RpXXXXc6XXXXXXXXXXXX-16-16.png" rel="shortcut icon" type="image/x-icon">
    <style>
        * {
            box-sizing: border-box;
        }

        .grid {
            width: 484px;
            height: 301px;
            margin-left: 13px;
            margin-bottom: 15px;
            background-color: #fff;
            float: left;
            padding: 10px;
        }

        .grid:hover img {
            opacity: .7;
        }

        .grid-con {
            width: 100%;
            height: 100%;
            box-shadow: 0 2px 8px 0 rgba(0, 0, 0, .09);
            overflow: hidden;
        }

        .selected {
            background-color: #00b262;
            color: #fff;
        }

        .tabs::before, .tabs::after {
            content: "";
            display: table;
            clear: both;
        }

        .tabs li {
            width: 232px;
            height: 57px;
            float: left;
            text-align: center;
            line-height: 57px;
            background-color: #f1f1f1;
            cursor: pointer;
            font-size: 18px;
        }

        .selected {
            background-color: #00b262 !important;
            color: #fff;
        }

        .tab-item {
            position: relative;
            display: block;
            width: 464px;
            height: 224px;
        }

        .tab-desc {
            position: absolute;
            top: 96px;
            z-index: 1;
            height: 87px;
            width: 291px;
            background: url(https://img.alicdn.com/tfs/TB1AnTXewMPMeJjy1XcXXXpppXa-290-87.png) no-repeat;
            background-position: 0 center;
        }

        .tab-img {
            width: 200px;
            height: 200px;
            position: absolute;
            right: 30px;
            top: 10px;
        }

        .desc-title {
            margin-left: 26px;
            margin-top: 16px;
        }

        .desc-title img {
            width: 23px;
            height: 23px;
            vertical-align: middle;
            margin-top: -10px;
        }

        .desc-title span {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 1px;
            color: #00b262;
            margin-left: 8px;
        }

        .desc-text {
            display: inline-block;
            font-size: 20px;
            margin-left: 26px;
            letter-spacing: 1px;
            color: #000;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="grid">
        <div class="grid-con">
            <ul class="tabs">
                <li class="tab selected">今日疯抢</li>
                <li class="tab">量贩装</li>
            </ul>
            <a class="tab-item" href="javascript:;" style="display: block;">
                <img class="tab-img" src="https://img.alicdn.com/tfs/TB1_O_LgSrqK1RjSZK9XXXyypXa-400-400.jpg">
                <div class="tab-desc">
                    <div class="desc-title">
                        <img src="https://img.alicdn.com/tfs/TB12RqQewMPMeJjy1XdXXasrXXa-23-23.png">
                        <span>零食欢乐购</span>
                    </div>
                    <div>
                        <span class="desc-text">爆款直降</span>
                    </div>
                </div>
            </a>
            <a class="tab-item" href="javascript:;" style="display: none;">
                <img class="tab-img" src="https://img.alicdn.com/tfs/TB1jNScP6TpK1RjSZKPXXa3UpXa-400-400.jpg">
                <div class="tab-desc">
                    <div class="desc-title">
                        <img src="https://img.alicdn.com/tfs/TB12RqQewMPMeJjy1XdXXasrXXa-23-23.png">
                        <span>爆款直降</span>
                    </div>
                    <div>
                        <span class="desc-text">粮油调味</span>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <script>
        var titles = document.querySelectorAll('.tab');
        var cons = document.querySelectorAll('.tab-item');
        
        var time = setInterval(roll, 3000);

        function roll() {
            var titles = document.querySelectorAll('.tab');
            var cons = document.querySelectorAll('.tab-item');
            var titleClass = [];
            for(var index = 0; index < titles.length; index++) {
                titleClass[index] = Array.from(titles[index].classList);
            }
            for(var k = 0; k < titles.length; k++) {
                if(titleClass[k].indexOf('selected') >= 0) {
                    titles[k].classList.remove('selected');
                    cons[k].style.display = 'none';
                } else {
                    titles[k].classList.add('selected');
                    cons[k].style.display = 'block';
                }
            }
        }

        //let 块作用域保存变化值
        //let定义变量优劣势
        //优
        //1.节省内存开销
        //2.块作用于保存变化值，代替手动闭包
        //劣
        //1.语法不兼容
        //2.内存泄漏问题
        // for(let i = 0; i < titles.length; i++) {
        //     titles[i].onmouseover = function() {
        //         for(var j = 0; j < cons.length; j++) {
        //             titles[j].classList.remove('selected');
        //             cons[j].style.display = 'none';
        //         }
        //         titles[i].classList.add('selected');
        //         cons[i].style.display = 'block';
        //     }
        // }

        // for(let i = 0; i < titles.length; i++) {
        //     titles[i].onmouseout = function() {
        //         clearInterval(time2);
        //         console.log('停止第二次轮播事件');
        //         var time2 = setInterval(roll, 3000);
        //         console.log('开始第二次轮播事件');
        //     }
        // }
    </script>

    <script>
        //选项卡
            // var arr1 = [选项1, 选项2, 选项3, 选项4];
            // var arr2 = [内容1, 内容2, 内容3, 内容4];
        //用一组数据操作另外一组数据 一一对应
        //当前操作的是第几个？

        //抽象出的规律
        //1.需要给每一个按钮添加操作
        //2.点击按钮，批量处理 内容显示以及按钮状态
        //3.当前操作的hhtm53sq顺序
        
        //!important
        //一个函数里包含另一个函数，并且里层函数引用了外层函数的变量，当调用里层函数的时候形成闭包
        //局部变量不销毁 记录变化
        //弊端 内存泄漏，大量使用闭包时，内存占用大但不会释放
        var num = 100;
           function a() {
               var num = 0;
               return function() {
                   num++;
                   console.log(num);
               }
           }

            var b = a();
            b();
            b();
            b();
            b();
            console.log(num);
            //闭包方式实现选项卡
            for(var i = 0; i < titles.length; i++) {
                (function(index) {
                    titles[index].onmouseover = function() {
                        for(var j = 0; j < cons.length; j++) {
                            titles[j].classList.remove('selected');
                            cons[j].style.display = 'none';
                        }
                        this.classList.add('selected');
                        cons[index].style.display = 'block';
                    }
                })(i);
            }
    </script>

</body>
</html>